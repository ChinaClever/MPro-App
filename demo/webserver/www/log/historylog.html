<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDU</title>
<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css" />	
<link rel="stylesheet" href="../css/font-awesome.min.css">
<link rel="stylesheet" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../js/highcharts.js"></script>

<link rel="stylesheet" href="../sytle-bar.css" />
<link type="text/css" href="demos.css" rel="stylesheet" />
<link href="./style.css" rel="stylesheet" type="text/css" media="screen" />
<link type="text/css" href="themes/base/ui.all.css" rel="stylesheet" />
<script type="text/javascript" src="ui/ui.core.js"></script>
<script type="text/javascript" src="ui/ui.datepicker.js"></script>

<style type="text/css">
	.panel-default{
				border: none;
				border-radius: 0px;
				margin-bottom: 0px;
				box-shadow: none;
				-webkit-box-shadow: none;
	}

	.panel-default > .panel-heading{
		color: #222;
		font-size:13px;
		background-color: #fff;
		border-color: #e6e6e6;
		padding: 10px 12px;
	}

	body{ 
		
		background: #fafafa;
	}

	tr{
		height:28px;
	}
</style>
<script>
	var chart;
	var flag;
	var ty;
	
	$(document).ready(function () {
		$.ajax({
				dataType:"text",
				url:"/npmslavelist",
				cache:false,
				success:function(sta)
				{
					var gv = new Array();
					gv=sta.split("?");
					flag = parseInt(gv[0]);
					ty = parseInt(gv[1]);
					LangFun();
					$("#datepicker").datepicker({dateFormat: 'yy-mm-dd'});
				}
			});
			
	});
	
	$(function () {
		$.ajax({
				dataType:"text",
				url:"/npmslavelist",
				cache:false,
				success:function(sta)
				{
					var gv = new Array();
					gv=sta.split("?");
					flag = parseInt(gv[0]);
					ty = parseInt(gv[1]);
					LangFun();
				}
			});
		$("#datepicker").datepicker({dateFormat: 'yy-mm-dd'});
	});
	
	
	function LangFun()
	{
		var lang_1 = ["Historical data", "历史数据", "Données historiques", "исторические данные", "Datos históricos", "البيانات التاريخية"];
		var lang_3 = ["Select the date:", "选择时间:", "Temps de sélection:", "время выборки:", "Tiempo de selección:", "اختر الوقت:"];
		var lang_4 = ["Select data types:", "选择类型:", "Type de sélection:", "Выбор типа:", "Tipo de selección:", "نوع الاختيار:"];
		var lang_5 = ["View", "查看", "Regarder", "осмотр", "Ver", "رأي"];
		var lang_6 = ["Export", "导出", "Exportations", "производный", "Exportación", "تصدير"];
		
		var ty1 = ["Current", "电流", "Courant", "ток", "Corriente", "تيار كهربائي"];
		var ty2 = ["Voltage", "电压", "Tension", "напряжение", "Voltaje", "الجهد"];
		var ty3 = ["Power", "功率", "Puissance", "мощность", "Potencia", "قوة"];
		var ty4 = ["Temperature", "温度", "Temperature", "температура", "Temperatura", "درجة الحرارة"];
		var ty5 = ["Humidity", "湿度", "Humidité", "влажность", "Humedad", "رطوبة"];

		document.getElementById("lang_1") .innerHTML = lang_1[flag];
		document.getElementById("lang_3") .innerHTML = lang_3[flag];
		document.getElementById("lang_4") .innerHTML = lang_4[flag];
		document.getElementById("lang_5") .value 	 = lang_5[flag];
	//	document.getElementById("lang_6") .value 	 = lang_6[flag];
		
		document.getElementById("ty1") .innerHTML = ty1[flag];
		document.getElementById("ty2") .innerHTML = ty2[flag];
		document.getElementById("ty3") .innerHTML = ty3[flag];
		document.getElementById("ty4") .innerHTML = ty4[flag];
		document.getElementById("ty5") .innerHTML = ty5[flag];
	}

	
	var lang_7;
	var lang_8;
	var lang_9;
	var lang_10;
	var lang_11;
	var lang_12;
	function clk()
	{
		var datepick = $("#datepicker").val();
		datepick = datepick.replace("-","");
		datepick = datepick.replace("-","");
		var type= document.getElementById("ty").value;
		
		if(type=="cur" && ((ty>4 && ty<9) || (ty>12 && ty<17)))
		{
			lang_7 =  ["Phase current curve in the past 24hrs", "24小时相电流信息趋势图", "phase Current information Trend Map", "диаграмма тенденций 24 - часового фазового тока", "Tendencias de la información sobre la corriente de 24 horas", ""];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Phase current", "相  电  流", "Courant de phase", "фазовый ток", "Corriente de fase", "مرحلة 24 ساعة المعلومات الحالية الرسم البياني الاتجاه"];
			lang_10 = ["Current(L1)", "电流(L1)", "Courant(L1)", "ток(L1)", "Corriente(L1)", "تيار كهربائي(L1)"];
			lang_11 = ["Current(L2)", "电流(L2)", "Courant(L2)", "ток(L2)", "Corriente(L2)", "تيار كهربائي(L2)"];
			lang_12 = ["Current(L3)", "电流(L3)", "Courant(L3)", "ток(L3)", "Corriente(L3)", "تيار كهربائي(L3)"];
		}
		else if(type=="cur" && ((ty>0 && ty<5) || (ty>8 && ty<13)))
		{
			lang_7 =  ["Total current curve in the past 24hrs", "24小时总电流信息趋势图", "Current information Trend", "24 - часовая диаграмма общей информации об токе", "Tendencias de la corriente global de 24 horas", "24 ساعة إجمالي الرسم البياني الحالي الاتجاه المعلومات"];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Total current", "总  电  流", "Courant total", "общий ток", "Corriente total", "المجموع الحالي"];
			lang_10 = ["Total Current", "总电流", "Courant total", "общий ток", "Corriente total", "المجموع الحالي"];
		}
		else if(type=="vol" && ((ty>4 && ty<9) || (ty>12 && ty<17)))
		{
			lang_7 =  ["Phase voltage curve in the past 24hrs", "24小时相电压信息趋势图", "Phase Voltage information Trend", "диаграмма тенденций 24 - часового фазового напряжения", "Tendencias de la información del voltaje de 24 horas", "مخطط اتجاه معلومات الجهد على مدار 24 ساعة"];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Phase voltage", "相 电  压", "Tension de phase", "фазовое напряжение", "Tensión de fase", "الجهد المرحلة"];
			lang_10 = ["Voltage(L1)", "电压(L1)", "Tension(L1)", "напряжение(L1)", "Voltaje(L1)", "الجهد(L1)"];
			lang_11 = ["Voltage(L2)", "电压(L2)", "Tension(L2)", "напряжение(L2)", "Voltaje(L2)", "الجهد(L2)"];
			lang_12 = ["Voltage(L3)", "电压(L3)", "Tension(L3)", "напряжение(L3)", "Voltaje(L3)", "الجهد(L3)"];
		}
		else if(type=="vol" && ((ty>0 && ty<5) || (ty>8 && ty<13)))
		{
			lang_7 =  ["Enter voltage curve in the past 24hrs", "24小时输入电压信息趋势图", "Voltage information Trend", "диаграмма тенденций 24 - часового ввода информации о напряжении", "Diagrama de tendencias de la información del voltaje", "مدخلات معلومات التيار الكهربائي على مدار 24 ساعة"];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Enter voltage", "输 入 电  压", "Tension", "напряжение", "Tensión de entrada", "مساهمة الجهد"];
			lang_10 = ["Enter voltage", "电压", "Tension", "напряжение", "Voltaje", "الجهد"];
		}
		else if(type=="pow")
		{
			lang_7 =  ["Total active power curve in the past 24hrs", "24小时总有功功率信息趋势图", "Dynamic power information pattern", "диаграмма тенденций 24 - часовой информации об активной мощности", "24 horas para obtener información de potencia", ""];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", ""];
			lang_9 =  ["Total active power", "总有功功率", "Puissance", "активная мощность", "Potencia total", ""];
			lang_10 = ["Total active power", "总有功功率", "Puissance", "активная мощность", "Potencia total", ""];
		}
		else if(type=="tem")
		{
			lang_7 =  ["Temperature curve in the past 24hrs", "24小时总温度1信息趋势图", "Temperature 1 information Trend", "Информация об общей температуре за 24 часа", "Temperatura total de 24 horas", "24 ساعة مجموع الرسم البياني الاتجاه معلومات الطاقة النشطة"];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Temperature", "温  度", "Temperature", "температура", "Temperatura", "درجة الحرارة"];
			lang_10 = ["Temperature1", "温度1", "Temperature1", "температура1", "Temperatura1", "درجة الحرارة1"];
			lang_11 = ["Temperature2", "温度2", "Temperature2", "температура2", "Temperatura2", "درجة الحرارة2"];
		}
		else if(type=="hum")
		{
			lang_7 =  ["Humidity curve in the past 24hrs", "24小时总湿度1信息趋势图", "Humidité 1 information Trend", "Информация о влажности за 24 часа", "Humedad total de 24 horas", "24 ساعة مجموع الرطوبة 1 الرسم البياني الاتجاه المعلومات"];
			lang_8 =  ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_9 =  ["Humidity", "湿  度", "Humidité", "влажность", "Humedad", "رطوبة"];
			lang_10 = ["Humidity1", "湿度1", "Humidité1", "влажность1", "Humedad1", "رطوبة1"];
			lang_11 = ["Humidity2", "湿度2", "Humidité2", "влажность2", "Humedad2", "رطوبة2"];
		}
		
		var file="data/"+type+"/"+datepick+".json";
		
		if((type=="cur" || type=="vol") && ((ty>4 && ty<9) || (ty>12 && ty<17)))
		{
			$(function () {
			$.getJSON(file, function(data) {
					$('#container').highcharts({
						chart: {
								zoomType: 'x'
							},
						title: {
								text: lang_7[flag]
							},
						subtitle: {
							text: document.ontouchstart === undefined ?
							lang_8[flag] : lang_8[flag]
						},
						xAxis: {
							type: 'datetime',
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						tooltip: {
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%Y-%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						yAxis: {
							title: {
								text: lang_9[flag]
							}
						},
						legend: {
							layout:'horizontal',
						},
						plotOptions: {
							line:{
										lineWidth:1
									}
						},
						series: [
							{
								type: 'line',
								name: lang_10[flag],
								data: data.data1
							},
							{
								type: 'line',
								name: lang_11[flag],
								data: data.data2
							},
							{
								type: 'line',
								name: lang_12[flag],
								data: data.data3
							}
						]
					});
				});
			});
		}
		else if((type=="cur" || type=="vol") && ((ty>0 && ty<5) || (ty>8 && ty<13)))
		{
			$(function () {
				$.getJSON(file, function(data) {
					$('#container').highcharts({
						chart: {
								zoomType: 'x'
							},
						title: {
								text: lang_7[flag]
							},
						subtitle: {
							text: document.ontouchstart === undefined ?
							lang_8[flag] : lang_8[flag]
						},
						xAxis: {
							type: 'datetime',
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						tooltip: {
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%Y-%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						yAxis: {
							title: {
								text: lang_9[flag]
							}
						},
						legend: {
							enabled: false
						},
						plotOptions: {
							area: {
								fillColor: {
									linearGradient: {
										x1: 0,
										y1: 0,
										x2: 0,
										y2: 1
									},
									stops: [
										[0, Highcharts.getOptions().colors[0]],
										[1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
									]
								},
								marker: {
									radius: 2
								},
								lineWidth: 1,
								states: {
									hover: {
										lineWidth: 1
									}
								},
								threshold: null
							}
						},
						series: [{
							type: 'area',
							name: lang_10[flag],
							data: data.data1
						}]
					});
				});
			});
		}
		else if(type=="tem" || type=="hum")
		{
			$(function () {
				$.getJSON(file, function(data) {
					$('#container').highcharts({
						chart: {
								zoomType: 'x'
							},
						title: {
								text: lang_7[flag]
							},
						subtitle: {
							text: document.ontouchstart === undefined ?
							lang_8[flag] : lang_8[flag]
						},
						xAxis: {
							type: 'datetime',
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						tooltip: {
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%Y-%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						yAxis: {
							title: {
								text: lang_9[flag]
							}
						},
						legend: {
							layout:'horizontal',
						},
						plotOptions: {
							line:{
										lineWidth:1
									}
						},
						series: [
							{
								type: 'line',
								name: lang_10[flag],
								data: data.data1
							},
							{
								type: 'line',
								name: lang_11[flag],
								data: data.data2
							}
						]
					});
				});
			});
		}
		else if(type=="pow")
		{
			$(function () {
				$.getJSON(file, function(data) {
					$('#container').highcharts({
						chart: {
								zoomType: 'x'
							},
						title: {
								text: lang_7[flag]
							},
						subtitle: {
							text: document.ontouchstart === undefined ?
							lang_8[flag] : lang_8[flag]
						},
						xAxis: {
							type: 'datetime',
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						tooltip: {
							dateTimeLabelFormats: {
								millisecond: '%H:%M:%S.%L',
								second: '%H:%M:%S',
								minute: '%H:%M',
								hour: '%H:%M',
								day: '%Y-%m-%d',
								week: '%m-%d',
								month: '%Y-%m',
								year: '%Y'
							}
						},
						yAxis: {
							title: {
								text: lang_9[flag]
							}
						},
						legend: {
							enabled: false
						},
						plotOptions: {
							area: {
								fillColor: {
									linearGradient: {
										x1: 0,
										y1: 0,
										x2: 0,
										y2: 1
									},
									stops: [
										[0, Highcharts.getOptions().colors[0]],
										[1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
									]
								},
								marker: {
									radius: 2
								},
								lineWidth: 1,
								states: {
									hover: {
										lineWidth: 1
									}
								},
								threshold: null
							}
						},
						series: [{
							type: 'area',
							name: lang_10[flag],
							data: data
						}]
					});
				});
			});
		}
	}	

</script>
</head>
<body>
<div style="padding: 0px; margin-bottom: 0.8%; overflow: hidden; ">
	<div class="box" style="float: left; width: 100%; margin-bottom: 0.8%; height:96%; background:#e7e7e7;">
		<div class="panel panel-default">
			<div class="panel-heading" ><i class="fa fa-sitemap fa-lg" style="padding-right: 5px;" ></i ><span id="lang_1"></span></div>			
		</div>
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:775px; background:#ffffff;">
		
			<br>
			<table width="100%" >
				<tr >
					<td width="50%"></td>
					<td width="20%"><span id="lang_3"></span><input type="text" id="datepicker" style="width:200px;"></input></td>
					<td width="20%">
						<span id="lang_4" ></span>
						<select id="ty" style="width:200px;">
							<option value="cur" id="ty1"></option>
							<option value="vol" id="ty2"></option>
							<option value="pow" id="ty3"></option>
							<option value="tem" id="ty4"></option>
							<option value="hum" id="ty5"></option>
						</select>
					</td>
					<td><input id="lang_5" style="position:relative; height:21px; width:70px; margin-right:2%;" type="button" onClick="clk();"></input></td>
					<!--td><input id="lang_6" style="position:relative; height:21px; width:70px; margin-right:2%;" type="button" onClick="exportlogs();"></input></td-->
				</tr>
			</table>
		
			<br><br>
			<div align=left id="container" style="width:100%; height:420px;"></div>
		</div>
	</div>
</div>
</body>
</html>
