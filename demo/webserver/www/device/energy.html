<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDU</title>
<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css" />	
<link rel="stylesheet" href="../css/font-awesome.min.css">
<link rel="stylesheet" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>

<style type="text/css">
.panel-default{
            border: none;
            border-radius: 0px;
            margin-bottom: 0px;
            box-shadow: none;
            -webkit-box-shadow: none;
}

.panel-default > .panel-heading{
	color: #222;
	font-size:13px;
	background-color: #fff;
	border-color: #e6e6e6;
	padding: 10px 12px;
}

body{ 
	
	background: #fafafa;
}

tr{
	height:28px;
}
</style>

<script>

	var ty;
	var flag;
	
	$(document).ready(function () {
			$.ajax({
					dataType:"text",
					url:"/npmslavelist",
					cache:false,
					success:function(sta)
					{
						var gv = new Array();
						gv=sta.split("?");
						flag = parseInt(gv[0]);
						LangFun();
						getdata();
						for(var i=0;i<10;i++)
						{
							if(gv[i*2+2])
							{
								document.getElementById("ms").options.add( new Option(gv[i*2+2],parseInt(gv[i*2+3])) );
							}
						}
					}
				});
			setInterval("getdata();",3000);
		});
		
	function change()
	{
		getdata();
	}
	
	function getdata()
	{
		var ms;
		ms =  document.getElementById("ms").value;
		if(ms=="")
			ms = "0";
			
		$.ajax({
			dataType:"text",
			url:"/getenergy?id1="+ms,
			async:true,
			cache:false,
			success:function(sta)
			{
				var gv = new Array();
				gv=sta.split("?");
				ty = parseInt(gv[0]);
				var k=0;
				var count=1;
				for(var i=0;i<56;i++)
				{
					if(parseInt(gv[3*i+1])>0)
					{
						if(k%2!=0)
							document.getElementById("tr"+i).style.background="#f0f0f0";
						else
							document.getElementById("tr"+i).style.background="#ffffff";
							
						document.getElementById("tr"+i).style.display='';
						document.getElementById("a"+i).innerHTML = gv[3*i+1];
						document.getElementById("b"+i).innerHTML = gv[3*i+2];
						document.getElementById("c"+i).innerHTML = gv[3*i+3];
						
						k++;
						count++;
					}
					else
					{
						document.getElementById("tr"+i).style.display="none";
					}
				}
				document.getElementById("tr56").style.display='';
				document.getElementById("a56").innerHTML = count.toString();
				document.getElementById("b56").innerHTML = "All";
				document.getElementById("c56").innerHTML = "&nbsp;";
			}
		});
	}
	var ch1 = ["Please set the correct threshold value!", "请正确设置阈值!", "Définissez correctement le seuil!", "Пожалуйста, установите порог", "Por favor, establezca el umbral correctamente", "يرجى ضبط العتبة بشكل صحيح"];
	var ch2 = ["No permission!", "无权限!", "Pas d'autorité", "нет прав", "Sin permiso", "يلا إذن"];
	var ch3 = ["Incorrect setting!", "设置错误!", "Erreur de réglage!", "Ошибка настройки", "Error de configuración", "خطأ في الإعداد"];
	var ch4 = ["No permission!", "普通用户无权限!", "Pas d'autorité", "нет прав", "Sin permiso", "يلا إذن"];
	function clk(index)
	{
		var ms;
		ms =  document.getElementById("ms").value;
		if(ms=="")
		ms = "0";
		
		$.ajax({
			dataType:"text",
			url:"/setenergy?id1="+ms+"&id2="+index,
			async:true,
			cache:false,
			success:function(sta)
			{
				if(sta=="OK")
				{
					getdata();
				}
				if(sta=="flase")
				{
					alert(ch2[flag]);
				}
				if(sta=="not admin user"){
					alert(ch4[flag])
				}
				
			}
		});
	
	}

	function mov(obj)
	{
		obj.style.background="#ffffa0";
	}
	
	function movout(obj)
	{
		var index=obj.id.replace("tr","");
		if(parseInt(index)%2!=0)
			obj.style.background="#f0f0f0";
		else
			obj.style.background="#ffffff";
	}
		
	function LangFun()
	{
		var lang_1  = ["Outlet setting", "电能清零", "Énergie électrique", "электрическая очистка", "Energía eléctrica", "تطهير السلطة"];
		var lang_2  = ["PDU Selection:", "设备选择:", "PDU Selection:", "Выбор устройства:", "Selección del dispositivo:", "اختيار المعدات:"];
		var lang_3  = ["No.", "序号", "Numéro de série", "порядковый номер", "Número", "الرقم التسلسلي"];
		var lang_4  = ["Outlet name", "单元名称", "Nom", "имя ячейки", "Nombre de unidad", "اسم الوحدة"];
		var lang_5  = ["Energy consumption(kWh)", "电能消耗(kWh)", "Energie(kWh)", "расход электроэнергии(kWh)", "Consumo de energía eléctrica(kWh)", "استهلاك الطاقة(kWh)"];
		var lang_6  = ["Energy zero reset", "重置清零", "Énergie électrique", "сброс нуля", "Reiniciar cero", "إعادة تعيين واضح"];
		var lang_7  = ["Reset", "计量重置", "RESET", "сбросить", "Sustitución de medición", "إعادة تعيين القياس"];

		document.getElementById("lang_1").innerHTML = lang_1[flag];
		document.getElementById("lang_2").innerHTML = lang_2[flag];
		document.getElementById("lang_3").innerHTML = lang_3[flag];
		document.getElementById("lang_4").innerHTML = lang_4[flag];
		document.getElementById("lang_5").innerHTML = lang_5[flag];
		document.getElementById("lang_6").innerHTML = lang_6[flag];
		
		for(i=0;i<57;i++)
		{
			document.getElementById("d"+i).value = lang_7[flag];
		}
	}
</script>
</head>

<body>
<div style="padding: 0px; margin-bottom: 0.8%; overflow: hidden; ">
	<div class="box" style="float: left; width: 100%; margin-bottom: 0.8%; height:96%; background:#e7e7e7;">
		<div class="panel panel-default">
			<div class="panel-heading" ><i class="fa fa-th-list fa-lg" style="padding-right: 5px;" ></i ><span id="lang_1"></span><ul style="float:right; font-family:courier;" ><span id="lang_2"></span><select id="ms" style="width:200px;" onChange="change();"></select></ul></div>			
		</div>
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:100%; background:#ffffff;">

		<table width="100%" style="font-size:12px; text-align:center;">
		<tr align="left" style="color:#000000;background:#e7e7e7; height:30px; text-align:center">
			<td width="4%"><b id="lang_3"></b></td>
			<td width="20%"><b id="lang_4"></b></td>
			<td width="10%"><b id="lang_5"></b></td>
			<td width="60%" ><b id="lang_6" style="margin-left:80%;"></b></td>
		</tr>
		<tr id="tr0" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a0"></td>
			<td id="b0"></td>
			<td id="c0"></td>
			<td><input id="d0" style="margin-left:80%;" type="button" onClick="clk(0);"></input></td>
		</tr>
		<tr id="tr1" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a1"></td>
			<td id="b1"></td>
			<td id="c1"></td>
			<td><input id="d1" style="margin-left:80%;" type="button" onClick="clk(1);"></input></td>
		</tr>
		<tr id="tr2" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a2"></td>
			<td id="b2"></td>
			<td id="c2"></td>
			<td><input id="d2" style="margin-left:80%;" type="button" onClick="clk(2);"></input></td>
		</tr>
		<tr id="tr3" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a3"></td>
			<td id="b3"></td>
			<td id="c3"></td>
			<td><input id="d3" style="margin-left:80%;" type="button" onClick="clk(3);"></input></td>
		</tr>
		<tr id="tr4" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a4"></td>
			<td id="b4"></td>
			<td id="c4"></td>
			<td><input id="d4" style="margin-left:80%;" type="button" onClick="clk(4);"></input></td>
		</tr>
		<tr id="tr5" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a5"></td>
			<td id="b5"></td>
			<td id="c5"></td>
			<td><input id="d5" style="margin-left:80%;" type="button" onClick="clk(5);"></input></td>
		</tr>
		<tr id="tr6" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a6"></td>
			<td id="b6"></td>
			<td id="c6"></td>
			<td><input id="d6" style="margin-left:80%;" type="button" onClick="clk(6);"></input></td>
		</tr>
		<tr id="tr7" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a7"></td>
			<td id="b7"></td>
			<td id="c7"></td>
			<td><input id="d7" style="margin-left:80%;" type="button" onClick="clk(7);"></input></td>
		</tr>
		<tr id="tr8" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a8"></td>
			<td id="b8"></td>
			<td id="c8"></td>
			<td><input id="d8" style="margin-left:80%;" type="button" onClick="clk(8);"></input></td>
		</tr>
		<tr id="tr9" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a9"></td>
			<td id="b9"></td>
			<td id="c9"></td>
			<td><input id="d9" style="margin-left:80%;" type="button" onClick="clk(9);"></input></td>
		</tr>
		<tr id="tr10" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a10"></td>
			<td id="b10"></td>
			<td id="c10"></td>
			<td><input id="d10" style="margin-left:80%;" type="button" onClick="clk(10);"></input></td>
		</tr>
		<tr id="tr11" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a11"></td>
			<td id="b11"></td>
			<td id="c11"></td>
			<td><input id="d11" style="margin-left:80%;" type="button" onClick="clk(11);"></input></td>
		</tr>
		<tr id="tr12" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a12"></td>
			<td id="b12"></td>
			<td id="c12"></td>
			<td><input id="d12" style="margin-left:80%;" type="button" onClick="clk(12);"></input></td>
		</tr>
		<tr id="tr13" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a13"></td>
			<td id="b13"></td>
			<td id="c13"></td>
			<td><input id="d13" style="margin-left:80%;" type="button" onClick="clk(13);"></input></td>
		</tr>
		<tr id="tr14" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a14"></td>
			<td id="b14"></td>
			<td id="c14"></td>
			<td><input id="d14" style="margin-left:80%;" type="button" onClick="clk(14);"></input></td>
		</tr>
		<tr id="tr15" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a15"></td>
			<td id="b15"></td>
			<td id="c15"></td>
			<td><input id="d15" style="margin-left:80%;" type="button" onClick="clk(15);"></input></td>
		</tr>
		<tr id="tr16" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a16"></td>
			<td id="b16"></td>
			<td id="c16"></td>
			<td><input id="d16" style="margin-left:80%;" type="button" onClick="clk(16);"></input></td>
		</tr>
		<tr id="tr17" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a17"></td>
			<td id="b17"></td>
			<td id="c17"></td>
			<td><input id="d17" style="margin-left:80%;" type="button" onClick="clk(17);"></input></td>
		</tr>
		<tr id="tr18" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a18"></td>
			<td id="b18"></td>
			<td id="c18"></td>
			<td><input id="d18" style="margin-left:80%;" type="button" onClick="clk(18);"></input></td>
		</tr>
		<tr id="tr19" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a19"></td>
			<td id="b19"></td>
			<td id="c19"></td>
			<td><input id="d19" style="margin-left:80%;" type="button" onClick="clk(19);"></input></td>
		</tr>
		<tr id="tr20" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a20"></td>
			<td id="b20"></td>
			<td id="c20"></td>
			<td><input id="d20" style="margin-left:80%;" type="button" onClick="clk(20);"></input></td>
		</tr>
		<tr id="tr21" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a21"></td>
			<td id="b21"></td>
			<td id="c21"></td>
			<td><input id="d21" style="margin-left:80%;" type="button" onClick="clk(21);"></input></td>
		</tr>
		<tr id="tr22" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a22"></td>
			<td id="b22"></td>
			<td id="c22"></td>
			<td><input id="d22" style="margin-left:80%;" type="button" onClick="clk(22);"></input></td>
		</tr>
		<tr id="tr23" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a23"></td>
			<td id="b23"></td>
			<td id="c23"></td>
			<td><input id="d23" style="margin-left:80%;" type="button" onClick="clk(23);"></input></td>
		</tr>
		<tr id="tr24" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a24"></td>
			<td id="b24"></td>
			<td id="c24"></td>
			<td><input id="d24" style="margin-left:80%;" type="button" onClick="clk(24);"></input></td>
		</tr>
		<tr id="tr25" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a25"></td>
			<td id="b25"></td>
			<td id="c25"></td>
			<td><input id="d25" style="margin-left:80%;" type="button" onClick="clk(25);"></input></td>
		</tr>
		<tr id="tr26" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a26"></td>
			<td id="b26"></td>
			<td id="c26"></td>
			<td><input id="d26" style="margin-left:80%;" type="button" onClick="clk(26);"></input></td>
		</tr>
		<tr id="tr27" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a27"></td>
			<td id="b27"></td>
			<td id="c27"></td>
			<td><input id="d27" style="margin-left:80%;" type="button" onClick="clk(27);"></input></td>
		</tr>
		<tr id="tr28" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a28"></td>
			<td id="b28"></td>
			<td id="c28"></td>
			<td><input id="d28" style="margin-left:80%;" type="button" onClick="clk(28);"></input></td>
		</tr>
		<tr id="tr29" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a29"></td>
			<td id="b29"></td>
			<td id="c29"></td>
			<td><input id="d29" style="margin-left:80%;" type="button" onClick="clk(29);"></input></td>
		</tr>
		<tr id="tr30" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a30"></td>
			<td id="b30"></td>
			<td id="c30"></td>
			<td><input id="d30" style="margin-left:80%;" type="button" onClick="clk(30);"></input></td>
		</tr>
		<tr id="tr31" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a31"></td>
			<td id="b31"></td>
			<td id="c31"></td>
			<td><input id="d31" style="margin-left:80%;" type="button" onClick="clk(31);"></input></td>
		</tr>
		<tr id="tr32" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a32"></td>
			<td id="b32"></td>
			<td id="c32"></td>
			<td><input id="d32" style="margin-left:80%;" type="button" onClick="clk(32);"></input></td>
		</tr>
		<tr id="tr33" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a33"></td>
			<td id="b33"></td>
			<td id="c33"></td>
			<td><input id="d33" style="margin-left:80%;" type="button" onClick="clk(33);"></input></td>
		</tr>
		<tr id="tr34" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a34"></td>
			<td id="b34"></td>
			<td id="c34"></td>
			<td><input id="d34" style="margin-left:80%;" type="button" onClick="clk(34);"></input></td>
		</tr>
		<tr id="tr35" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a35"></td>
			<td id="b35"></td>
			<td id="c35"></td>
			<td><input id="d35" style="margin-left:80%;" type="button" onClick="clk(35);"></input></td>
		</tr>
		<tr id="tr36" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a36"></td>
			<td id="b36"></td>
			<td id="c36"></td>
			<td><input id="d36" style="margin-left:80%;" type="button" onClick="clk(36);"></input></td>
		</tr>
		<tr id="tr37" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a37"></td>
			<td id="b37"></td>
			<td id="c37"></td>
			<td><input id="d37" style="margin-left:80%;" type="button" onClick="clk(37);"></input></td>
		</tr>
		<tr id="tr38" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a38"></td>
			<td id="b38"></td>
			<td id="c38"></td>
			<td><input id="d38" style="margin-left:80%;" type="button" onClick="clk(38);"></input></td>
		</tr>
		<tr id="tr39" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a39"></td>
			<td id="b39"></td>
			<td id="c39"></td>
			<td><input id="d39" style="margin-left:80%;" type="button" onClick="clk(39);"></input></td>
		</tr>
		<tr id="tr40" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a40"></td>
			<td id="b40"></td>
			<td id="c40"></td>
			<td><input id="d40" style="margin-left:80%;" type="button" onClick="clk(40);"></input></td>
		</tr>
		<tr id="tr41" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a41"></td>
			<td id="b41"></td>
			<td id="c41"></td>
			<td><input id="d41" style="margin-left:80%;" type="button" onClick="clk(41);"></input></td>
		</tr>
		<tr id="tr42" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a42"></td>
			<td id="b42"></td>
			<td id="c42"></td>
			<td><input id="d42" style="margin-left:80%;" type="button" onClick="clk(42);"></input></td>
		</tr>
		<tr id="tr43" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a43"></td>
			<td id="b43"></td>
			<td id="c43"></td>
			<td><input id="d43" style="margin-left:80%;" type="button" onClick="clk(43);"></input></td>
		</tr>
		<tr id="tr44" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a44"></td>
			<td id="b44"></td>
			<td id="c44"></td>
			<td><input id="d44" style="margin-left:80%;" type="button" onClick="clk(44);"></input></td>
		</tr>
		<tr id="tr45" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a45"></td>
			<td id="b45"></td>
			<td id="c45"></td>
			<td><input id="d45" style="margin-left:80%;" type="button" onClick="clk(45);"></input></td>
		</tr>
		<tr id="tr46" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a46"></td>
			<td id="b46"></td>
			<td id="c46"></td>
			<td><input id="d46" style="margin-left:80%;" type="button" onClick="clk(46);"></input></td>
		</tr>
		<tr id="tr47" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a47"></td>
			<td id="b47"></td>
			<td id="c47"></td>
			<td><input id="d47" style="margin-left:80%;" type="button" onClick="clk(47);"></input></td>
		</tr>
		<tr id="tr48" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a48"></td>
			<td id="b48"></td>
			<td id="c48"></td>
			<td><input id="d48" style="margin-left:80%;" type="button" onClick="clk(48);"></input></td>
		</tr>
		<tr id="tr49" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a49"></td>
			<td id="b49"></td>
			<td id="c49"></td>
			<td><input id="d49" style="margin-left:80%;" type="button" onClick="clk(49);"></input></td>
		</tr>
		<tr id="tr50" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a50"></td>
			<td id="b50"></td>
			<td id="c50"></td>
			<td><input id="d50" style="margin-left:80%;" type="button" onClick="clk(50);"></input></td>
		</tr>
		<tr id="tr51" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a51"></td>
			<td id="b51"></td>
			<td id="c51"></td>
			<td><input id="d51" style="margin-left:80%;" type="button" onClick="clk(51);"></input></td>
		</tr>
		<tr id="tr52" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a52"></td>
			<td id="b52"></td>
			<td id="c52"></td>
			<td><input id="d52" style="margin-left:80%;" type="button" onClick="clk(52);"></input></td>
		</tr>
		<tr id="tr53" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a53"></td>
			<td id="b53"></td>
			<td id="c53"></td>
			<td><input id="d53" style="margin-left:80%;" type="button" onClick="clk(53);"></input></td>
		</tr>
		<tr id="tr54" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a54"></td>
			<td id="b54"></td>
			<td id="c54"></td>
			<td><input id="d54" style="margin-left:80%;" type="button" onClick="clk(54);"></input></td>
		</tr>
		<tr id="tr55" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a55"></td>
			<td id="b55"></td>
			<td id="c55"></td>
			<td><input id="d55" style="margin-left:80%;" type="button" onClick="clk(55);"></input></td>
		</tr>
		<tr id="tr56" onMouseOut="movout(this);" onMouseMove="mov(this);">
			<td id="a56"></td>
			<td id="b56"></td>
			<td id="c56"></td>
			<td><input id="d56" style="margin-left:80%;" type="button" onClick="clk(56);"></input></td>
		</tr>
		
		</table>
		</div>
	</div>
</div>
</body>
</html>
