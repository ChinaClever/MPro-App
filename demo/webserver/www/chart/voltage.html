<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDU</title>
<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css" />	
<link rel="stylesheet" href="../css/font-awesome.min.css">
<link rel="stylesheet" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../js/highcharts.js"></script>
<style type="text/css">
	.panel-default{
				border: none;
				border-radius: 0px;
				margin-bottom: 0px;
				box-shadow: none;
				-webkit-box-shadow: none;
	}

	.panel-default > .panel-heading{
		color: #222;
		font-size:13px;
		background-color: #fff;
		border-color: #e6e6e6;
		padding: 10px 12px;
	}

	body{ 
		
		background: #fafafa;
	}

	tr{
		height:28px;
	}
</style>
<script>
	var chart;
	var flag;
	var ty;
	
	$(document).ready(function () {
		$.ajax({
				dataType:"text",
				url:"/npmslavelist",
				cache:false,
				success:function(sta)
				{
					var gv = new Array();
					gv=sta.split("?");
					flag = parseInt(gv[0]);
					ty = parseInt(gv[1]);
					LangFun(flag);
					getdata(flag);
				}
			});
	});

	var lang_1
	var lang_2;
	var lang_3;
	var lang_4;
	var lang_5;
	function LangFun(flag)
	{
		if((ty>4 && ty<9) || (ty>12 && ty<17))
		{
			lang_1 = ["Phase voltage status", "相电压信息", "Tension de phase", "Информация о фазовом напряжении", "Información de tensión", "معلومات الجهد المرحلة"];
			lang_2 = ["Phase voltage curve in the past 24hrs", "过去24小时相电压信息趋势图", "Phase Voltage information Trend", "диаграмма фазовых напряжений", "Tendencias de la información del voltaje en las últimas 24 horas", "رسم بياني لمعلومات اتجاه الجهد على مدار الـ 24 ساعة الماضية"];
			lang_3 = ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_4 = ["Phase voltage", "相  电  压", "Tension de phase", "фазовое напряжение", "Tensión de fase", "الجهد المرحلة"];
			lang_5 = ["Voltage(L1)", "电压(L1)", "Tension de phase(L1)", "напряжение(L1)", "Voltaje(L1)", "الجهد(L1)"];
			lang_6 = ["Voltage(L2)", "电压(L2)", "Tension de phase(L2)", "напряжение(L2)", "Voltaje(L2)", "الجهد(L2)"];
			lang_7 = ["Voltage(L3)", "电压(L3)", "Tension de phase(L3)", "напряжение(L3)", "Voltaje(L3)", "الجهد(L3)"];
		}
		else
		{
			lang_1 = ["Input voltage status", "输入电压信息", "Input Voltage information", "Информация о входном напряжении", "Información del voltaje", "معلومات الجهد الإدخال"];
			lang_2 = ["Input voltage curve in the past 24hrs", "过去24小时输入电压信息趋势图", "диаграмма тенденций входного напряжения", "Arrastre del ratón para reducir", "إدخال التيار الكهربائي اتجاه المعلومات الرسم البياني في ال 24 ساعة الماضية"];
			lang_3 = ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
			lang_4 = ["Input voltage", "输  入  电  压", "Tension de phase", "входной напряжение", "Tensión de entrada", "مساهمة الجهد"];
			lang_5 = ["Input voltage", "输入电压", "Tension de phase", "входной напряжение", "Tensión de entrada", "مساهمة الجهد"];
		}

		document.getElementById("lang_1") .innerHTML = lang_1[flag];
	}

	function getdata(flag)
	{	
		if((ty>4 && ty<9) || (ty>12 && ty<17))
		{
			$(function () {
					$.getJSON('data/vol.json', function(data) {
							$('#container').highcharts({
								chart: {
										zoomType: 'x'
									},
								title: {
										text: lang_2[flag]
									},
								subtitle: {
									text: document.ontouchstart === undefined ?
									lang_3[flag] : lang_3[flag]
								},
								xAxis: {
									type: 'datetime',
									dateTimeLabelFormats: {
										millisecond: '%H:%M:%S.%L',
										second: '%H:%M:%S',
										minute: '%H:%M',
										hour: '%H:%M',
										day: '%m-%d',
										week: '%m-%d',
										month: '%Y-%m',
										year: '%Y'
									}
								},
								tooltip: {
									dateTimeLabelFormats: {
										millisecond: '%H:%M:%S.%L',
										second: '%H:%M:%S',
										minute: '%H:%M',
										hour: '%H:%M',
										day: '%Y-%m-%d',
										week: '%m-%d',
										month: '%Y-%m',
										year: '%Y'
									}
								},
								yAxis: {
									title: {
										text: lang_4[flag]
									}
								},
								legend: {
									layout:'horizontal',
								},
								plotOptions: {
									line:{
										lineWidth:1
									}
								},
								series: [
									{
										type: 'line',
										name: lang_5[flag],
										data: data.data1
									},
									{
										type: 'line',
										name: lang_6[flag],
										data: data.data2
									},
									{
										type: 'line',
										name: lang_7[flag],
										data: data.data3
									},
								]
							});
					});
				});
		}
		else
		{
			$(function () {
				$.getJSON('data/vol.json', function(data) {
						$('#container').highcharts({
							chart: {
									zoomType: 'x'
								},
							title: {
									text: lang_2[flag]
								},
							subtitle: {
								text: document.ontouchstart === undefined ?
								lang_3[flag] : lang_3[flag]
							},
							xAxis: {
								type: 'datetime',
								dateTimeLabelFormats: {
									millisecond: '%H:%M:%S.%L',
									second: '%H:%M:%S',
									minute: '%H:%M',
									hour: '%H:%M',
									day: '%m-%d',
									week: '%m-%d',
									month: '%Y-%m',
									year: '%Y'
								}
							},
							tooltip: {
								dateTimeLabelFormats: {
									millisecond: '%H:%M:%S.%L',
									second: '%H:%M:%S',
									minute: '%H:%M',
									hour: '%H:%M',
									day: '%Y-%m-%d',
									week: '%m-%d',
									month: '%Y-%m',
									year: '%Y'
								}
							},
							yAxis: {
								title: {
									text: lang_4[flag]
								}
							},
							legend: {
								enabled: false
							},
							plotOptions: {
								area: {
									fillColor: {
										linearGradient: {
											x1: 0,
											y1: 0,
											x2: 0,
											y2: 1
										},
										stops: [
											[0, Highcharts.getOptions().colors[0]],
											[1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
										]
									},
									marker: {
										radius: 2
									},
									lineWidth: 1,
									states: {
										hover: {
											lineWidth: 1
										}
									},
									threshold: null
								}
							},
							series: [{
								type: 'area',
								name: lang_5[flag],
								data: data.data1
							}]
						});
				});
			});
		}
	}
</script>
</head>
</head>
<body >
<div style="padding: 0px; margin-bottom: 0.8%; overflow: hidden; ">
	<div class="box" style="float: left; width: 100%; margin-bottom: 0.8%; height:96%; background:#e7e7e7;">
		<div class="panel panel-default">
			<div class="panel-heading" ><i class="fa fa-th-list fa-lg" style="padding-right: 5px;" ></i ><span id="lang_1"></span></div>			
		</div>
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:775px; background:#ffffff;">
			<br>
			<div align=left id="container" style="width:100%; height:420px;"></div>
		</div>
	</div>
</div>
</body>
</html>
