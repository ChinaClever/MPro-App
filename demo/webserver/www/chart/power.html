<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDU</title>
<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css" />	
<link rel="stylesheet" href="../css/font-awesome.min.css">
<link rel="stylesheet" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../js/highcharts.js"></script>
<style type="text/css">
	.panel-default{
				border: none;
				border-radius: 0px;
				margin-bottom: 0px;
				box-shadow: none;
				-webkit-box-shadow: none;
	}

	.panel-default > .panel-heading{
		color: #222;
		font-size:13px;
		background-color: #fff;
		border-color: #e6e6e6;
		padding: 10px 12px;
	}

	body{ 
		
		background: #fafafa;
	}

	tr{
		height:28px;
	}
</style>
<script>
	var chart;
	var flag;
	
	$(document).ready(function () {
		$.ajax({
				dataType:"text",
				url:"/npmslavelist",
				cache:false,
				success:function(sta)
				{
					var gv = new Array();
					gv=sta.split("?");
					flag = parseInt(gv[0]);
					LangFun(flag);
					getdata(flag);
				}
			});
	});
	
	var lang_1
	var lang_2;
	var lang_3;
	var lang_4;
	var lang_5;
	function LangFun(flag)
	{
		lang_1 = ["Total load power status", "总有功功率信息", "Puissance", "Информация об активной мощности", "Información de potencia", "مجموع معلومات الطاقة النشطة"];
		lang_2 = ["Total load power curve in the past 24hrs", "过去24小时总有功功率信息趋势图", "Dynamic power information trend", "диаграмма тенденций информации об активной мощности", "Tendencias de la información de potencia en las últimas 24 horas", "إجمالي الرسم البياني اتجاه معلومات الطاقة النشطة في ال 24 ساعة الماضية"];
		lang_3 = ["Move your mouse to zoom in or out", "鼠标拖动可以进行缩放", "Glisser la souris pour zoom", "перетаскивание мышью позволяет Масштабировать", "Arrastre del ratón para reducir", "اسحب الماوس للتكبير"];
		lang_4 = ["Total load power", "总有功功率", "Puissance", "активная мощность", "Potencia total", "مجموع الطاقة النشطة"];
		lang_5 = ["Total load power", "总有功功率", "Puissance", "активная мощность", "Potencia total", "مجموع الطاقة النشطة"];

		document.getElementById("lang_1") .innerHTML = lang_1[flag];
	}

	function getdata(flag)
	{	
			$(function () {
					$.getJSON('data/pow.json', function(data) {
							$('#container').highcharts({
								chart: {
										zoomType: 'x'
									},
								title: {
										text: lang_2[flag]
									},
								subtitle: {
									text: document.ontouchstart === undefined ?
									lang_3[flag] : lang_3[flag]
								},
								xAxis: {
									type: 'datetime',
									dateTimeLabelFormats: {
										millisecond: '%H:%M:%S.%L',
										second: '%H:%M:%S',
										minute: '%H:%M',
										hour: '%H:%M',
										day: '%m-%d',
										week: '%m-%d',
										month: '%Y-%m',
										year: '%Y'
									}
								},
								tooltip: {
									dateTimeLabelFormats: {
										millisecond: '%H:%M:%S.%L',
										second: '%H:%M:%S',
										minute: '%H:%M',
										hour: '%H:%M',
										day: '%Y-%m-%d',
										week: '%m-%d',
										month: '%Y-%m',
										year: '%Y'
									}
								},
								yAxis: {
									title: {
										text: lang_4[flag]
									}
								},
								legend: {
									enabled: false
								},
								plotOptions: {
									area: {
										fillColor: {
											linearGradient: {
												x1: 0,
												y1: 0,
												x2: 0,
												y2: 1
											},
											stops: [
												[0, Highcharts.getOptions().colors[0]],
												[1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
											]
										},
										marker: {
											radius: 2
										},
										lineWidth: 1,
										states: {
											hover: {
												lineWidth: 1
											}
										},
										threshold: null
									}
								},
								series: [{
									type: 'area',
									name: lang_5[flag],
									data: data
								}]
							});
					});
				});
	}
</script>
</head>
</head>
<body onload="LangFun(1);">
<div style="padding: 0px; margin-bottom: 0.8%; overflow: hidden; ">
	<div class="box" style="float: left; width: 100%; margin-bottom: 0.8%; height:96%; background:#e7e7e7;">
		<div class="panel panel-default">
			<div class="panel-heading" ><i class="fa fa-th-list fa-lg" style="padding-right: 5px;" ></i ><span id="lang_1"></span></div>			
		</div>
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:775px; background:#ffffff;">
			<br>
			<div align=left id="container" style="width:100%; height:420px;"></div>
		</div>
	</div>
</div>
</body>
</html>
