<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDU</title>
<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css" />	
<link rel="stylesheet" href="../css/font-awesome.min.css">
<link rel="stylesheet" href="../css/style.css" />
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>

<style type="text/css">
.panel-default{
            border: none;
            border-radius: 0px;
            margin-bottom: 0px;
            box-shadow: none;
            -webkit-box-shadow: none;
}

.panel-default > .panel-heading{
	color: #222;
	font-size:13px;
	background-color: #fff;
	border-color: #e6e6e6;
	padding: 10px 12px;
}

body{ 
	
	background: #fafafa;
}

tr{
	height:28px;
}
</style>
<script>
	var flag;
	$(document).ready(function () {
		$.ajax({
				dataType:"text",
				url:"/npmslavelist",
				cache:false,
				success:function(sta)
				{
					var gv = new Array();
					gv=sta.split("?");
					flag = parseInt(gv[0]);
					LangFun();
				}
			});

		$.ajax({
			dataType:"text",
			url:"/geteth0info",
			async:true,
			cache:false,
			success:function(sta)
			{
				var gv = new Array();
				gv=sta.split("?");
				
				document.getElementById("ccv4").value = parseInt(gv[0]);	
				document.getElementById("ipv4").value = gv[1];
				document.getElementById("maskv4").value = gv[2];
				document.getElementById("gwv4").value = gv[3];
				document.getElementById("d1v4").value = gv[4];
				document.getElementById("d2v4").value = gv[5];
			}
		});
	});
		
		
	function change(n)
	{
		if(n==0)
		{
			if(document.getElementById("ccv4").value=="1")
			{
				document.getElementById("ccv4").value =1;
				document.getElementById("ipv4").value = "";
				document.getElementById("maskv4").value = "";
				document.getElementById("gwv4").value = "";
				document.getElementById("d1v4").value = "";
				document.getElementById("d2v4").value = "";
			}
			else
			{
				document.getElementById("ccv4").value = 0;
				document.getElementById("ipv4").value = "";
				document.getElementById("maskv4").value = "";
				document.getElementById("gwv4").value = "";
				document.getElementById("d1v4").value = "";
				document.getElementById("d2v4").value = "";
			}
		}
		else if(n==1)
		{
		
		}
	}
	
	function checkIP(value) 
	{
		var exp = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
		var reg = value.match(exp);
		if (reg == null) 
		{
			alert("Address illegal！");
			return 1;
		}
		return 0;
	}
	
	function saveIPv4()
	{
		var auto = document.getElementById("ccv4").value;
		var ip = document.getElementById("ipv4").value;
		var mask = document.getElementById("maskv4").value;
		var gw = document.getElementById("gwv4").value;
		var d1 = document.getElementById("d1v4").value;
		var d2 = document.getElementById("d2v4").value;
		if(auto =="0")
		{
			if(checkIP(d1))
			{
				return;
			}
			if(checkIP(gw))
			{
				return;
			}
			if(checkIP(mask))
			{
				return;
			}
			if(checkIP(ip))
			{
				return;
			}
			if(checkIP(d2))
			{
				return;
			}
		}
		$.ajax({
				dataType:"text",
				url:"/setIPv4?id1="+auto+"&id2="+ip+"&id3="+mask+"&id4="+gw+"&id5="+d1+"&id6="+d2+"&",
				async:true,
				cache:false,
				success:function(sta)
				{
					if(flag==0)
					{
						if(sta=="flase")
						{
							alert("No permission!");
						}
						else if(sta=="err1")
						{
							alert("Settings Error!");
						}
						else
						{
							alert("Settings success, please restart the device!");
						}
					}
					else
					{
						if(sta=="flase")
						{
							alert("不允许!");
						}
						else if(sta=="err1")
						{
							alert("设置错误!");
						}
						else
						{
							alert("设置成功，请重启设备!");
						}
					}
					
				}
			});
	}
	
	
	
	function LangFun()
	{
		var lang_1  = ["Local Connectivity", "本地连接", "Local Connection", "локальное соединение", "Conexión local", "اتصال محلي"];
		var lang_2  = ["TCP/IPv4 Setting", "TCP/IPv4设置", "TCP / IPv4 paramètres", "Настройки TCP / IPv4", "TCP / IPv4", "إعدادات TCP / IPv4"];
		var lang_3  = ["Network Mode:", "网络模式:", "Mode réseau", "сетевой режим", "Modo de red", "وضع الشبكة"];
		var lang_4  = ["Static", "手动设置", "Static", "Ручные настройки", "Configuración manual", "الإعداد اليدوي"];
		var lang_5  = ["DHCP", "自动获取", "DHCP", "автоматический доступ", "Acceso automático", "اكتساب التلقائي"];
		var lang_6  = ["IP Address:", "IP 地址 :", "IP Address", "IP - адрес", "Dirección IP", "عنوان IP"];
		var lang_7  = ["Subnet Mask:", "子网掩码:", "Subnet Mask", "Маска подсети", "Máscara de subred", "قناع الشبكة الفرعية"];
		var lang_8  = ["Gateway:", "网关:", "Gateway", "шлюз", "Puerta", "بوابة"];
		var lang_9  = ["DNS 1:", "DNS 1:", "DNS 1", "DNS 1", "DNS 1", "DNS 1"];
		var lang_10 = ["DNS 2:", "DNS 2:", "DNS 2", "DNS 2", "DNS 2", "DNS 2"];
		var lang_11 = ["Submit", "提交", "Submit", "Submit", "Submit", "Submit"];
		var lang_12 = ["TCP/IPv6 Setting", "TCP/IPv6设置", "TCP / IPv4 paramètres", "Настройки TCP / IPv6", "TCP / IPv6", "إعدادات TCP / IPv6"];
		var lang_13 = ["Network Mode:", "网络模式:", "Mode réseau", "сетевой режим", "Modo de red", "وضع الشبكة"];
		var lang_14 = ["Static", "手动设置", "Static", "Ручные настройки", "Configuración manual", "الإعداد اليدوي"];
		var lang_15 = ["DHCP", "自动获取", "DHCP", "автоматический доступ", "Acceso automático", "اكتساب التلقائي"];
		var lang_16 = ["IPv6 address", "IPv6地址:", "IPv6 address", "Адрес IPv6", "Dirección IPv6", "عنوان IPv6"];
		var lang_17 = ["Subnet prefix length", "子网前缀长度:", "Longueur de préfixe de sous - réseau", "длина приставки подсети", "Longitud del prefijo de subred", "طول بادئة الشبكة الفرعية"];
		var lang_18 = ["Default gateway", "默认网关:", "Passerelle par défaut", "Шлюз по умолчанию", "Puerta predeterminada", "العبارة الافتراضية"];
		var lang_19 = ["Preferred DNS server", "首选DNS服务器:", "Serveur DNS préféré", "предпочтительный DNS - сервер", "Servidor DNS", "خادم DNS المفضل"];
		var lang_20 = ["Standby DNS server", "备用DNS服务器:", "Serveur d 'ADN de secours", "резервный сервер DNS", "Servidor DNS", "خادم DNS البديل"];

		document.getElementById("lang_1") .innerHTML = lang_1[flag];
		document.getElementById("lang_2") .innerHTML = lang_2[flag];
		document.getElementById("lang_3") .innerHTML = lang_3[flag];
		document.getElementById("lang_4") .innerHTML = lang_4[flag];
		document.getElementById("lang_5") .innerHTML = lang_5[flag];
		document.getElementById("lang_6") .innerHTML = lang_6[flag];
		document.getElementById("lang_7") .innerHTML = lang_7[flag];
		document.getElementById("lang_8") .innerHTML = lang_8[flag];
		document.getElementById("lang_9") .innerHTML = lang_9[flag];
		document.getElementById("lang_10").innerHTML = lang_10[flag];
		document.getElementById("lang_11").value     = lang_11[flag];
		document.getElementById("lang_12").innerHTML = lang_12[flag];
		document.getElementById("lang_13").innerHTML = lang_13[flag];
		document.getElementById("lang_14").innerHTML = lang_14[flag];
		document.getElementById("lang_15").innerHTML = lang_15[flag];
		document.getElementById("lang_16").innerHTML = lang_16[flag];
		document.getElementById("lang_17").innerHTML = lang_17[flag];
		document.getElementById("lang_18").innerHTML = lang_18[flag];
		document.getElementById("lang_19").innerHTML = lang_19[flag];
		document.getElementById("lang_20").innerHTML = lang_20[flag];
		document.getElementById("lang_21").value  	 = lang_11[flag];
	}
</script>
</head>
<body>
<div style="padding: 0px; margin-bottom: 0.8%; overflow: hidden; ">
	<div class="box" style="float: left; width: 100%; margin-bottom: 0.8%; height:96%; background:#e7e7e7;">
		<div class="panel panel-default">
			<div class="panel-heading" ><i class="fa fa-th-list fa-lg" style="padding-right: 5px;" ></i ><span id="lang_1"></span></div>			
		</div>
		
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:250px; background:#ffffff; ">		
			<table width="100%" border="0" style="font-size:12px;">
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_2"></td>
				<td></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_3"></td>
				<td><select id="ccv4" style="width:200px" onChange="change(0);">
				<option value="0" id="lang_4"></option>
				<option value="1" id="lang_5"></option> 
				</select></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_6"></td>
				<td><input id="ipv4" style="width:200px" ></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_7"></td>
				<td><input id="maskv4" style="width:200px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_8"></td>
				<td><input id="gwv4" style="width:200px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_9"></td>
				<td><input id="d1v4" style="width:200px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_10"></td>
				<td><input id="d2v4" style="width:200px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td><input style="margin-top:10px; height:21px; width:50px;"  type="button"  onClick="saveIPv4();" id="lang_11"></input></td>
				<td></td>
			</tr>
			</table>
		</div>
		
		<div style="border:1px solid;border-color: #ffffff; margin:10px; height:260px; background:#ffffff;">
			<table width="100%" border="0" style="font-size:12px; margin-top:10px;">
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_12"></td>
				<td></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_13"></td>
				<td><select id="ss" style="width:200px" onChange="change(1);">
				<option value="0" id="lang_14"></option>
				<option value="1" id="lang_15"></option> 
				</select></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_16"></td>
				<td><input id="ipv6" style="width:400px" ></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_17"></td>
				<td><input id="maskv6" style="width:50px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_18"></td>
				<td><input id="gwv6" style="width:400px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_19"></td>
				<td><input id="d1v6" style="width:400px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td width="120" id="lang_20"></td>
				<td><input id="d2v6" style="width:400px"></input></td>
			</tr>
			<tr>
				<td width="10px"></td>
				<td><input style="margin-top:10px; height:21px; width:50px;"  type="button"  onClick="saveIPv6();" id="lang_21"></input></td>
				<td></td>
			</tr>
			</table>   
		</div>
	</div>
</div>
</body>
</html>
