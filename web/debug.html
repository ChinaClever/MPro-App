<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>debug</title>
		<link rel="stylesheet" href="./include/css/public.min.css">
		<link rel="stylesheet" href="./include/css/iconfont.min.css">
		<link rel="stylesheet" href="./include/css/font-awesome.min.css">
		<style>
			.panel-default{
            border: none;
            border-radius: 0px;
            margin-bottom: 0px;
            box-shadow: none;
            -webkit-box-shadow: none;
			}
			.panel-default > .panel-heading{
				color: #222;
				font-size:13px;
				background-color: #fff;
				border-color: #e6e6e6;
				padding: 10px 12px;
			}
		</style>
	</head>
<body>
	<div class="page-cont">
		<div class="section">
			<div class="section-cont">
				<div class="grid-row">
					<div class="grid-col grid-col-7">
						<div class = "panel panel-default">
							<div class ="panel-heading">
								<i class = "fa fa-th-list fa-lg " style="padding-right:5px;"></i>
								<span id="lang_1">后台管理设置</span>
				
							</div>
						</div>
					</div>
					<div class="grid-col grid-col-7 ">
						<table class="table table-border-none_ text-left_ set_table"></table>
					</div>
					<div class="grid-col grid-col-7">
						<table class="table table-border-none_ text-left_ threshold_table"></table>
					</div>
					<div class="grid-col grid-col-7">
						<table class="table table-border-none_ text-left_ out_table"></table>
					</div>
					<div style=" width: 99%; margin-bottom: 0.8%; border:1px solid;border-color: #ffffff; margin-left:10px; height:100px; background:#ffffff;">
					</div>
				</div>
			</div>
		</div>
    <script src="./include/js/jquery-1.11.3.min.js"></script>
	<script src="./include/js/rpc-over-websocket.js"></script>
    <script src="./include/js/public.min.js"></script>
    <script>
    	let name_phase_ = new Array("单相","双火线","三相");
    	let id_name = new Array("phase_","board_num_","board_num1","board_num2","board_num3","board_num4","");
    	let distribution = new Array("6x8","4x12","8x6","12x4");
		let output_num = parseInt(sessionStorage.getItem("OutputNum" + addr));
		let phase_num = parseInt(sessionStorage.getItem("PhaseNum" + addr));
		let loop_num = parseInt(sessionStorage.getItem("LoopNum" + addr));
		let board_num =	 parseInt(sessionStorage.getItem("BoardNum" + addr));
		let board_out = new Array(0,0,0,0);
		let loop_out = new Array(0,0,0,0,0,0);
		let cfg_data = new Array(10);
		let break_en = 0;
		read_data();
    	$('.set_table').html(buildTable());
    	$('.threshold_table').html(buildTableThreshold());
    	$('.out_table').html(buildTableOutput());
		function read_data(){
			let i = 0;
			for(i= 0;i<board_num;i++){
				board_out[i] = sessionStorage.getItem("BoardOutputNum" + '_' + (i+1));
			}
			for(i= 0;i<loop_num;i++){
				loop_out[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			}
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
			cfg_data[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i+1));
		}
		function Set_(){

		}
		function show(){

		}
		function cked(ckd){
			var stat=0,group = 0;
			let addr = 0;
			var type1 = ckd.id.substr(0,1);
			var num = parseInt(ckd.id.slice(1))+1;
			if(ckd.checked == false){
				return ;
			}
			group = type1.charCodeAt() - 'c'.charCodeAt();
			if(ckd.checked == true){
				stat = 1;
			}else{
				stat = 0;
			}
			rpc.call('pduSetParam',[addr,26,group+1,num,0,stat]);
		}
		function buildTable() {
			var thead = '',tbody = '';
			thead = '<tr><td width ="25%" style="font-size:20px;">设置</td>\
			<td width ="75%"></td></tr>';
			tbody += '<tr><td>相位数:</td>';
			tbody += '<td><input id = "phase_" style ="width:2.5%" type = "text" value="'+phase_num+'"></input>(1-单相,2-双火线,3-三相)</td></tr>';
			tbody += '<tr><td>执行板数量:</td>';
			tbody += '<td><input id = "board_num_" style ="width:2.5%" type = "text" value="'+phase_num+'"></input></td></tr>';
			tbody += '<tr><td>每块执行板的输出位数量:</td>';
			tbody += '<td><input id = "board_num1" style ="width:2.5%" type = "text" value="'+board_out[0]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num2" style ="width:2.5%;" type = "text" value="'+board_out[1]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num3" style ="width:2.5%;" type = "text" value="'+board_out[2]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num4" style ="width:2.5%;" type = "text" value="'+board_out[3]+'"></input></td></tr>';
			tbody += '<tr><td>回路数量:</td>';
			tbody += '<td><input id = "loop_num_" style ="width:2.5%" type = "text" value="'+loop_num+'"></input></td></tr>';
			tbody += '<tr><td>每个回路的输出位数量:</td>';
			tbody += '<td><input id = "out_num1" style ="width:2.5%" type = "text" value="'+loop_out[0]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num2" style ="width:2.5%;" type = "text" value="'+loop_out[1]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num3" style ="width:2.5%;" type = "text" value="'+loop_out[2]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num4" style ="width:2.5%;" type = "text" value="'+loop_out[3]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num5" style ="width:2.5%;" type = "text" value="'+loop_out[4]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num6" style ="width:2.5%;" type = "text" value="'+loop_out[5]+'"></input></td></tr>';
			tbody += '<tr><td>带不带断路器:</td>';
			tbody += '<td><input id = "break_" style ="width:2.5%" type = "text" value="' + break_en + '"></input>(0-不带断路器,1-带断路器)</td></tr>';
			tbody += '<tr><td></td><td></td></tr>';


			tbody += '<tr><td>屏幕方向角:</td>';
			tbody += '<td><input id = "angle_" style ="width:2.5%" type = "text" value="'+cfg_data[0]+'">(0-90°,1-180°,2-180°,3-270°)</input></td></tr>';
			tbody += '<tr><td>版本类型:</td>';
			tbody += '<td><input id = "ver_mode_" style ="width:2.5%" type = "text" value="'+cfg_data[1]+'">(0-标准,1-中性)</input></td></tr>';
			tbody += '<tr><td>IN/OUT口级联方式:</td>';
			tbody += '<td><input id = "cascade_" style ="width:2.5%" type = "text" value="'+cfg_data[2]+'">(0-网络一带三,1-modbus)</input></td></tr>';
			tbody += '<tr><td>带不带传感器盒子:</td>';
			tbody += '<td><input id = "serson_box_" style ="width:2.5%" type = "text" value="'+cfg_data[3]+'">(0-不带,1-带)</input></td></tr>';
			tbody += '<tr><td>设备系列选择:</td>';
			tbody += '<td><input id = "ser_sel_" style ="width:2.5%" type = "text" value="'+cfg_data[4]+'">(1-A系列,2-B系列,3-C系列,4-D系列)</input></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';

			tbody += '<tr><td>额定电压:</td>';
			tbody += '<td><input id = "vol_" style ="width:2.5%" type = "text" value="'+cfg_data[5]+'"></input>(115-低压,225-高压)</td></tr>';
			tbody += '<tr><td>额定电流:</td>';
			tbody += '<td><input id = "cur_" style ="width:2.5%" type = "text" value="'+cfg_data[6]+'"></input></td></tr>';
			tbody += '<tr><td>额定功率:</td>';
			tbody += '<td><input id = "pow_" style ="width:2.5%" type = "text" value="'+cfg_data[7]+'"></input></td></tr>';
			tbody += '<tr><td>语言选择:</td>';
			tbody += '<td><input id = "language_" style ="width:2.5%" type = "text" value="'+cfg_data[8]+'"></input>(0-英文,1-中文)</td></tr>';
			tbody += '<tr><td>MAC地址:</td>';
			tbody += '<td><input id = "mac_" style ="width:24.5%" type = "text" value="'+cfg_data[9]+'"></input></td></tr>';
			tbody += '<tr><td><input style ="width:100px" type = "button" onclick = "Set_()" value="保存"></input></td><td></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
		function buildTableThreshold() {
			var thead = '',tbody = '';
			thead = '<tr><td style="font-size:20px;" colspan = "3">阈值统一设置</td>\
			<td width ="8%"></td>\
			<td width ="8%"></td>\
			<td width ="8%"></td>\
			<td width ="8%"></td><td width ="47%"></td></tr>';
			tbody += '<tr><td width ="5%">序号</td><td width ="8%">数据类型</td><td width ="8%" >额定值</td><td width ="8%" >最小值</td><td>下临界值</td><td>上临界值</td><td>最大值</td><td></td></tr>';
			tbody += '<tr><td>1</td><td>相电压(V)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="220"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="240"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="240"></input></td><td></td></tr>';
			tbody += '<tr><td>2</td><td>相电流(A)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="63"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="63"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="63"></input></td><td></td></tr>';
			tbody += '<tr><td>3</td><td>相功率(W)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="14080"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="14080"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="14080"></input></td><td></td></tr>';
			tbody += '<tr><td>4</td><td>回路电压(V)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="220"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="240"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="240"></input></td><td></td></tr>';
			tbody += '<tr><td>5</td><td>回路电流(A)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="32"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="32"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="32"></input></td><td></td></tr>';
			tbody += '<tr><td>6</td><td>回路功率(W)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="7040"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="7040"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="7040"></input></td><td></td></tr>';
			tbody += '<tr><td>7</td><td>输出位电流(A)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="16"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="16"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="16"></input></td><td></td></tr>';
			tbody += '<tr><td>8</td><td>温度(℃)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="40"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="40"></input"></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="40"></input></td><td></td></tr>';
			tbody += '<tr><td>9</td><td>湿度(%)</td><td><input id = "board_num_" style ="width:60.5%" type = "text" value ="90"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="0"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="90"></input></td>\
				<td><input id = "board_num_" style ="width:60.5%" type = "text"  value ="90"></input></td><td></td></tr>';
			tbody += '<tr><td colspan = "3" ><input style ="width:100px" type = "button" onclick = "Set()" value="统一设置"></input></td><td></td><td></td><td></td><td></td><td></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
		function buildTableOutput() {
			var thead = '',tbody = '';
			thead = '<tr><td style="font-size:20px;" colspan = "61">输出位额定电流值设置</td></tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">输出位</td>';
				for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+1) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+2) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+3) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+4) + '</td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">16A</td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">10A</td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center"><input id = "cur_val" style ="width:35%;text-align:center" type = "text"  value ="0">A</input></td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody += '<tr><td colspan = "61"><input style ="width:100px" type = "button" onclick = "Set()" value="保存"></input></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
    </script>
</body>
</html>
