<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>debug</title>
		<link rel="stylesheet" href="./include/css/public.min.css">
		<link rel="stylesheet" href="./include/css/iconfont.min.css">
		<link rel="stylesheet" href="./include/css/font-awesome.min.css">
		<style>
			.panel-default{
            border: none;
            border-radius: 0px;
            margin-bottom: 0px;
            box-shadow: none;
            -webkit-box-shadow: none;
			}
			.panel-default > .panel-heading{
				color: #222;
				font-size:13px;
				background-color: #fff;
				border-color: #e6e6e6;
				padding: 10px 12px;
			}
		</style>
	</head>
<body>
	<div class="page-cont">
		<div class="section">
			<div class="section-cont">
				<div class="grid-row">
					<div class="grid-col grid-col-7">
						<div class = "panel panel-default">
							<div class ="panel-heading">
								<i class = "fa fa-th-list fa-lg " style="padding-right:5px;"></i>
								<span id="lang_1">后台管理设置</span>
				
							</div>
						</div>
					</div>
					<div class="grid-col grid-col-7 ">
						<table class="table table-border-none_ text-left_ set_table"></table>
					</div>
					<div class="grid-col grid-col-7">
						<table class="table table-border-none_ text-left_ threshold_table"></table>
					</div>
					<div class="grid-col grid-col-7">
						<table class="table table-border-none_ text-left_ out_table"></table>
					</div>
					<div class="grid-col grid-col-7">
						<table class="table table-border-none_ text-center vol_table"></table>
					</div>
					<div style=" width: 99%; margin-bottom: 0.8%; border:1px solid;border-color: #ffffff; margin-left:10px; height:100px; background:#ffffff;">
					</div>
				</div>
			</div>
		</div>
    <script src="./include/js/jquery-1.11.3.min.js"></script>
	<script src="./include/js/rpc-over-websocket.js"></script>
    <script src="./include/js/fn_public.js"></script>
    <script src="./include/js/public.min.js"></script>
    <script>
    	let name_phase_ = new Array("单相","双火线","三相");
    	let id_name = new Array("phase_","board_num_","board_num1","board_num2","board_num3","board_num4","");
		let num_id = new Array("","phase_","loop_","","board_");
    	let distribution = new Array("6x8","4x12","8x6","12x4");
		let output_num;
		let phase_num;
		let loop_num;
		let board_num;
		let board_out = new Array(0,0,0,0);
		let loop_out = new Array(0,0,0,0,0,0);
		let cfg_data = new Array(10);
		let break_en = 0;
		let rating = new Array();
		let rating_ = new Array();
		let out_vol = new Array(49);
		let unite_data = new Array();
		let unite_name = new Array(phase,phase,phase,loop,loop,loop,output,envir,envir);
		let unite_type = new Array(vol_,cur_,pow_,vol_,cur_,pow_,cur_,tmp_,hum_);
		let unite_id = new Array("phase_vol_","phase_cur_","phase_pow_","loop_vol_","loop_cur_","loop_pow_","output_cur_","envir_tmp_","envir_hum_");
		let name_cfg_ = new Array("angle_","ver_mode_","cascade_","serson_box_","ser_sel_","language_","mac_");
		let unite_sub = new Array(2,5,6,7,4);
		setTimeout(function(){
			read_debug_data();
		},300);
		for(i = 1;i<49;i++){
			out_vol[i] = 0;
		}
		$('.set_table').html(buildTable());
		$('.threshold_table').html(buildTableThreshold());
		$('.out_table').html(buildTableOutput());
		$('.vol_table').html(buildTableVol());
		let m = 0;
		var Time1 = setInterval(function(){
			read_data();
			show_data();
			m++;
			if(m ==10){
				clearInterval(Time1);
			}
		},500);
		function read_data(){
			let i = 0;
			output_num = parseInt(sessionStorage.getItem("OutputNum" + default_addr));
			phase_num = parseInt(sessionStorage.getItem("PhaseNum" + default_addr));
			loop_num = parseInt(sessionStorage.getItem("LoopNum" + default_addr));
			board_num =	 parseInt(sessionStorage.getItem("BoardNum" + default_addr));
			document.getElementById("phase_").value = phase_num;
			document.getElementById("loop_").value = loop_num;
			document.getElementById("board_").value = board_num;
			for(let i = 1;i < loop_num+1;i++){
				document.getElementById("out_num"+i).value = loop_out[i - 1];
			}
			for(let i = 1;i < board_num+1;i++){
				document.getElementById("board_num"+i).value = board_out[i - 1];
			}
			document.getElementById("break_").value = break_en;
			for(i =0;i<7;i++){
				document.getElementById(name_cfg_[i]).value = cfg_data[i];
			}

			for(i= 0;i<board_num;i++){
				board_out[i] = sessionStorage.getItem("BoardOutputNum" + '_' + (i));
			}
			for(i= 0;i<loop_num;i++){
				loop_out[i] = sessionStorage.getItem("LoopOutputNum" + '_' + (i));
			}
			break_en = sessionStorage.getItem("BreakerEn" + default_addr);
			cfg_data[0] = sessionStorage.getItem("Angle" + default_addr);
			cfg_data[1] = 0;
			cfg_data[2] = 0;
			cfg_data[3] = 0;
			cfg_data[4] = sessionStorage.getItem(cfg_name[1] + default_addr);
			cfg_data[5] = sessionStorage.getItem("LanguageEn" + default_addr);
			cfg_data[6] = sessionStorage.getItem(ip_mode[0]+ ip_addr[11]);
			for(let i = 0;i<9;i++){
				unite_data[i] = new Array();
				unite_data[i][0] = sessionStorage.getItem(type_name[unite_name[i]]+ data_type[unite_type[i]] + data_name[2] + 0 +'_'+0);
				unite_data[i][1] = sessionStorage.getItem(type_name[unite_name[i]]+ data_type[unite_type[i]] + data_name[5] + 0 +'_'+0);
				unite_data[i][2] = sessionStorage.getItem(type_name[unite_name[i]]+ data_type[unite_type[i]] + data_name[6] + 0 +'_'+0);
				unite_data[i][3] = sessionStorage.getItem(type_name[unite_name[i]]+ data_type[unite_type[i]] + data_name[7] + 0 +'_'+0);
				unite_data[i][4] = sessionStorage.getItem(type_name[unite_name[i]]+ data_type[unite_type[i]] + data_name[4] + 0 +'_'+0);
			}

			for(i =1;i<=output_num;i++){
				rating[i] = sessionStorage.getItem(type_name[output]+ data_type[cur_] + data_name[2] + 0 +'_'+i);
				out_vol[i] = sessionStorage.getItem(type_name[output]+ data_type[vol_] + data_name[1] + 0 +'_'+i);
				rating_[i] = rating[i];
			}
		}
		function Set_(){
			for(let i = 0;i<num_id.length;i ++){
				if(num_id[i] != ""){
					rpc.call("pduSetParam",[0,num,i,0,0,document.getElementById(num_id[i]).value]);
					rpc.call("pduReadParam",[0,num,i,0,0]);
				}
			}
			for(let i = 1;i < loop_num+1;i++){
				rpc.call("pduSetParam",[0,num,7,(i -1),0,document.getElementById("out_num"+i).value]);
				rpc.call("pduReadParam",[0,num,7,(i -1),0]);
			}
			for(let i = 1;i < board_num+1;i++){
				rpc.call("pduSetParam",[0,num,6,(i -1),0,document.getElementById("board_num"+i).value]);
				rpc.call("pduReadParam",[0,num,6,(i -1),0]);
			}
			rpc.call("pduSetParam",[0,cfg,11,0,0,document.getElementById("break_").value]);
			rpc.call("pduReadParam",[0,cfg,11,0,0]);
			rpc.call("pduSetParam",[0,cfg,13,0,0,document.getElementById("angle_").value]);
			rpc.call("pduReadParam",[0,cfg,13,0,0]);
			rpc.call("pduSetParam",[0,cfg,1,0,0,document.getElementById("ser_sel_").value]);
			rpc.call("pduReadParam",[0,cfg,1,0,0]);
			rpc.call("pduSetParam",[0,cfg,10,0,0,document.getElementById("language_").value]);
			rpc.call("pduReadParam",[0,cfg,10,0,0]);
			rpc.call("pduSetParam",[0,41,11,0,0,document.getElementById("mac_").value]);
			rpc.call("pduReadParam",[0,41,11,0,0]);
		}
		function AllSet(){
			for(let i = 0;i<9;i++){
				for(let j = 0;j<5;j++){
					if(document.getElementById(unite_id[i]+j).value == unite_data[i][j]){
					}else{
						rpc.call("pduSetData",[0,unite_name[i],unite_type[i],unite_sub[j],0,document.getElementById(unite_id[i]+j).value]);
						rpc.call("pduReadData",[0,unite_name[i],unite_type[i],unite_sub[j],0]);
					}
				}
			}
		}
		function show_data(){
			for(let i = 0;i<9;i++){
				for(let j = 0;j<5;j++){
					document.getElementById(unite_id[i]+j).value = unite_data[i][j];
				}
			}
			for(i =1;i<=output_num;i++){
				if(rating[i] == 16){
					document.getElementById("a"+i).checked = true;
				}else if(rating[i] == 10){
					document.getElementById("b"+i).checked = true;
				}else{

				}
			}
		}
		function cked(ckd){
			var stat=0,type_ = 0;
			let addr = 0;
			var type1 = ckd.id.substr(0,1);
			var num = parseInt(ckd.id.slice(1));
			type_ = type1.charCodeAt() - 'a'.charCodeAt();
			if(ckd.checked == false){
				ckd.checked = true;
				return ;
			}
			if(num <= output_num){
				if(type_==0){
					stat = '16';
					document.getElementById("b" + num).checked = false;
					document.getElementById("c" + num).checked = false;
				}else if(type_ == 1){
					stat = '10';
					document.getElementById("a" + num).checked = false;
					document.getElementById("c" + num).checked = false;
				}else{
					stat = document.getElementById("cur_val").value;
					document.getElementById("a" + num).checked = false;
					document.getElementById("b" + num).checked = false;
				}
			}else{
				ckd.checked = false;
			}
			rating_[num] = stat;
		}
		function Set(){
			for(let  i = 1;i<=output_num;i++){
				rpc.call('pduSetData',[0,output,cur_,2,i,rating_[i]]);
			}
		}
		setInterval(function(){
			for(i =1;i<=output_num;i++){
				rpc.call('pduReadData',[addr,output,vol_,1,i]);
			}
			setTimeout(function(){
				for(i =1;i<=output_num;i++){
					out_vol[i] = sessionStorage.getItem(type_name[output]+ data_type[vol_] + data_name[1] + 0 +'_'+i);
					document.getElementById("vol" + i).innerHTML = out_vol[i];
				}
			},500);
		},1000);
		function buildTable() {
			var thead = '',tbody = '';
			thead = '<tr><td width ="25%" style="font-size:20px;">设置</td>\
			<td width ="75%"></td></tr>';
			tbody += '<tr><td>相位数:</td>';
			tbody += '<td><input id = "phase_" style ="width:2.5%" type = "text" value="'+phase_num+'"></input>(1-单相,2-双火线,3-三相)</td></tr>';
			tbody += '<tr><td>执行板数量:</td>';
			tbody += '<td><input id = "board_" style ="width:2.5%" type = "text" value="'+board_num+'"></input></td></tr>';
			tbody += '<tr><td>每块执行板的输出位数量:</td>';
			tbody += '<td><input id = "board_num1" style ="width:2.5%" type = "text" value="'+board_out[0]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num2" style ="width:2.5%;" type = "text" value="'+board_out[1]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num3" style ="width:2.5%;" type = "text" value="'+board_out[2]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "board_num4" style ="width:2.5%;" type = "text" value="'+board_out[3]+'"></input></td></tr>';
			tbody += '<tr><td>回路数量:</td>';
			tbody += '<td><input id = "loop_" style ="width:2.5%" type = "text" value="'+loop_num+'"></input></td></tr>';
			tbody += '<tr><td>每个回路的输出位数量:</td>';
			tbody += '<td><input id = "out_num1" style ="width:2.5%" type = "text" value="'+loop_out[0]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num2" style ="width:2.5%;" type = "text" value="'+loop_out[1]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num3" style ="width:2.5%;" type = "text" value="'+loop_out[2]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num4" style ="width:2.5%;" type = "text" value="'+loop_out[3]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num5" style ="width:2.5%;" type = "text" value="'+loop_out[4]+'"></input>';
			tbody += '&nbsp&nbsp<input id = "out_num6" style ="width:2.5%;" type = "text" value="'+loop_out[5]+'"></input></td></tr>';
			tbody += '<tr><td>带不带断路器:</td>';
			tbody += '<td><input id = "break_" style ="width:2.5%" type = "text" value="' + break_en + '"></input>(0-不带断路器,1-带断路器)</td></tr>';
			tbody += '<tr><td></td><td></td></tr>';


			tbody += '<tr><td>屏幕方向角:</td>';
			tbody += '<td><input id = "angle_" style ="width:2.5%" type = "text" value="'+cfg_data[0]+'">(0-0°水平,1-90°垂直,2-180°水平,3-270°垂直)</input></td></tr>';
			tbody += '<tr><td>版本类型:</td>';
			tbody += '<td><input id = "ver_mode_" style ="width:2.5%" type = "text" value="'+cfg_data[1]+'">(0-标准,1-中性)</input></td></tr>';
			tbody += '<tr><td>IN/OUT口级联方式:</td>';
			tbody += '<td><input id = "cascade_" style ="width:2.5%" type = "text" value="'+cfg_data[2]+'">(0-网络一带三,1-modbus)</input></td></tr>';
			tbody += '<tr><td>带不带传感器盒子:</td>';
			tbody += '<td><input id = "serson_box_" style ="width:2.5%" type = "text" value="'+cfg_data[3]+'">(0-不带,1-带)</input></td></tr>';
			tbody += '<tr><td>设备系列选择:</td>';
			tbody += '<td><input id = "ser_sel_" style ="width:2.5%" type = "text" value="'+cfg_data[4]+'">(1-A系列,2-B系列,3-C系列,4-D系列)</input></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';

			tbody += '<tr><td>语言选择:</td>';
			tbody += '<td><input id = "language_" style ="width:2.5%" type = "text" value="'+cfg_data[5]+'"></input>(0-中文,1-英文)</td></tr>';
			tbody += '<tr><td>MAC地址:</td>';
			tbody += '<td><input id = "mac_" style ="width:24.5%" type = "text" value="'+cfg_data[6]+'"></input></td></tr>';
			tbody += '<tr><td><input style ="width:100px" type = "button" onclick = "Set_()" value="保存"></input></td><td></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
		function buildTableThreshold() {
			var thead = '',tbody = '';
			thead = '<tr><td style="font-size:20px;" colspan = "3">阈值统一设置</td>\
			<td width ="8%"></td>\
			<td width ="8%"></td>\
			<td width ="8%"></td>\
			<td width ="8%"></td><td width ="47%"></td></tr>';
			tbody += '<tr><td width ="5%">序号</td><td width ="8%">数据类型</td><td width ="8%" >额定值</td><td width ="8%" >最小值</td><td>下临界值</td><td>上临界值</td><td>最大值</td><td></td></tr>';
			tbody += '<tr><td>1</td><td>相电压(V)</td><td><input id = "'+unite_id[0]+0+'" style ="width:60.5%" type = "text" value ="220"></input></td>\
				<td><input id = "'+unite_id[0]+1+'" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "'+unite_id[0]+2+'" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "'+unite_id[0]+3+'" style ="width:60.5%" type = "text" value ="240"></input></td>\
				<td><input id = "'+unite_id[0]+4+'" style ="width:60.5%" type = "text" value ="240"></input></td><td></td></tr>';
			tbody += '<tr><td>2</td><td>相电流(A)</td><td><input id = "'+unite_id[1]+0+'" style ="width:60.5%" type = "text" value ="63"></input></td>\
				<td><input id = "'+unite_id[1]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[1]+2+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[1]+3+'" style ="width:60.5%" type = "text" value ="63"></input></td>\
				<td><input id = "'+unite_id[1]+4+'" style ="width:60.5%" type = "text" value ="63"></input></td><td></td></tr>';
			tbody += '<tr><td>3</td><td>相功率(kW)</td><td><input id = "'+unite_id[2]+0+'" style ="width:60.5%" type = "text" value ="14080"></input></td>\
				<td><input id = "'+unite_id[2]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[2]+2+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[2]+3+'" style ="width:60.5%" type = "text" value ="14080"></input></td>\
				<td><input id = "'+unite_id[2]+4+'" style ="width:60.5%" type = "text" value ="14080"></input></td><td></td></tr>';
			tbody += '<tr><td>4</td><td>回路电压(V)</td><td><input id = "'+unite_id[3]+0+'" style ="width:60.5%" type = "text" value ="220"></input></td>\
				<td><input id = "'+unite_id[3]+1+'" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "'+unite_id[3]+2+'" style ="width:60.5%" type = "text" value ="80"></input></td>\
				<td><input id = "'+unite_id[3]+3+'" style ="width:60.5%" type = "text" value ="240"></input></td>\
				<td><input id = "'+unite_id[3]+4+'" style ="width:60.5%" type = "text" value ="240"></input></td><td></td></tr>';
			tbody += '<tr><td>5</td><td>回路电流(A)</td><td><input id = "'+unite_id[4]+0+'" style ="width:60.5%" type = "text" value ="32"></input></td>\
				<td><input id = "'+unite_id[4]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[4]+2+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[4]+3+'" style ="width:60.5%" type = "text" value ="32"></input></td>\
				<td><input id = "'+unite_id[4]+4+'" style ="width:60.5%" type = "text" value ="32"></input></td><td></td></tr>';
			tbody += '<tr><td>6</td><td>回路功率(kW)</td><td><input id = "'+unite_id[5]+0+'" style ="width:60.5%" type = "text" value ="7040"></input></td>\
				<td><input id = "'+unite_id[5]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[5]+2+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[5]+3+'" style ="width:60.5%" type = "text" value ="7040"></input></td>\
				<td><input id = "'+unite_id[5]+4+'" style ="width:60.5%" type = "text" value ="7040"></input></td><td></td></tr>';
			tbody += '<tr><td>7</td><td>输出位电流(A)</td><td><input id = "'+unite_id[6]+0+'" style ="width:60.5%" type = "text" value ="16"></input></td>\
				<td><input id = "'+unite_id[6]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[6]+2+'" style ="width:60.5%" type = "text"  value ="0"></input></td>\
				<td><input id = "'+unite_id[6]+3+'" style ="width:60.5%" type = "text"  value ="16"></input></td>\
				<td><input id = "'+unite_id[6]+4+'" style ="width:60.5%" type = "text"  value ="16"></input></td><td></td></tr>';
			tbody += '<tr><td>8</td><td>温度(℃)</td><td><input id = "'+unite_id[7]+0+'" style ="width:60.5%" type = "text" value ="40"></input></td>\
				<td><input id = "'+unite_id[7]+1+'" style ="width:60.5%" type ="text" value ="0"></input></td>\
				<td><input id = "'+unite_id[7]+2+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[7]+3+'" style ="width:60.5%" type = "text" value ="40"></input"></td>\
				<td><input id = "'+unite_id[7]+4+'" style ="width:60.5%" type = "text" value ="40"></input></td><td></td></tr>';
			tbody += '<tr><td>9</td><td>湿度(%)</td><td><input id = "'+unite_id[8]+0+'" style ="width:60.5%" type = "text" value ="90"></input></td>\
				<td><input id = "'+unite_id[8]+1+'" style ="width:60.5%" type = "text" value ="0"></input></td>\
				<td><input id = "'+unite_id[8]+2+'" style ="width:60.5%" type = "text"  value ="0"></input></td>\
				<td><input id = "'+unite_id[8]+3+'" style ="width:60.5%" type = "text"  value ="90"></input></td>\
				<td><input id = "'+unite_id[8]+4+'" style ="width:60.5%" type = "text"  value ="90"></input></td><td></td></tr>';
			tbody += '<tr><td colspan = "3" ><input style ="width:100px" type = "button" onclick = "AllSet()" value="统一设置"></input></td><td></td><td></td><td></td><td></td><td></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
		function buildTableOutput() {
			var thead = '',tbody = '';
			thead = '<tr><td style="font-size:20px;" colspan = "61">输出位额定电流值设置</td></tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">输出位</td>';
				for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+1) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+2) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+3) + '</td>';
				tbody +='<td width = "1.5%" style ="text-align:center">'+ ((i * 4)+4) + '</td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">16A</td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "a'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">10A</td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "b'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center"><input id = "cur_val" style ="width:35%;text-align:center" type = "text"  value ="0">A</input></td>';
			for(let i = 0;i<12;i++){
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+1) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+2) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+3) + '"></input></td>';
				tbody +='<td width = "1.5%"><input type = "checkbox" class = "input" onchange ="cked(this)" id = "c'+ ((i * 4)+4) + '"></input></td>';
				tbody +='<td width = "1.5%"></td>';
			}
			tbody +='</tr>';
			tbody += '<tr><td colspan = "61"><input style ="width:100px" type = "button" onclick = "Set()" value="保存"></input></td></tr>';
			tbody += '<tr><td></td><td></td></tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
		function buildTableVol() {
			var thead = '',tbody = '';
			thead = '<tr><td style="font-size:20px;text-align:left" colspan = "31">输出位电压值</td></tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">输出位</td>';
				for(let i = 0;i<6;i++){
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+1) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+2) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+3) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+4) + '</td>';
				tbody +='<td width = "3%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">电压(V)</td>';
			for(let i = 0;i<6;i++){
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+1) + '">'+out_vol[(i * 4)+1]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+2) + '">'+out_vol[(i * 4)+2]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+3) + '">'+out_vol[(i * 4)+3]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+4) + '">'+out_vol[(i * 4)+4]+'</td>';
				tbody +='<td width = "3%"></td>';
			}
			tbody +='<tr><td width = "5%" style ="text-align:center">输出位</td>';
				for(let i = 6;i<12;i++){
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+1) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+2) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+3) + '</td>';
				tbody +='<td width = "3%" style ="text-align:center">'+ ((i * 4)+4) + '</td>';
				tbody +='<td width = "3%"></td>';
			}
			tbody +='</tr>';
			tbody +='<tr><td width = "5%" style ="text-align:center">电压(V)</td>';
			for(let i = 6;i<12;i++){
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+1) + '">'+out_vol[(i * 4)+1]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+2) + '">'+out_vol[(i * 4)+2]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+3) + '">'+out_vol[(i * 4)+3]+'</td>';
				tbody +='<td width = "3%" id = "vol'+ ((i * 4)+4) + '">'+out_vol[(i * 4)+4]+'</td>';
				tbody +='<td width = "3%"></td>';
			}
			tbody +='</tr>';
			return '<thead>' + thead + '</thead>'
				 + '<tbody>' + tbody + '</tbody>';
		}
    </script>
</body>
</html>
